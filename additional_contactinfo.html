<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Contact Information</title>
   
     
      <link rel="stylesheet" href="CSS/style.css">
<script src="https://www.gstatic.com/firebasejs/7.6.1/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-firestore.js"></script>
   <script src="JS/retrievelink_additional_guest.js"></script>
  <script type="text/javascript" src="JS/jquery-3.4.1.js"></script>
 
 
  </head>
  <body>
      <div>
      <center>
    <h1>Contact Information</h1>
     
    <h4>Legal First Name</h4>
     <input type="text" name="firstname" id ="firstname" class="resizedTextbox" onKeyUp="Validatephone()" required><br>
 <h4>Legal Last Name</h4>
     <input type="text" name="lastname" id ="lastname" class="resizedTextbox" onKeyUp="Validatephone()" required><br>
  <h4>Phone Number</h4>
     <input type="text" name="phone" id ="phone" class="resizedTextbox" required onKeyUp="Validatephone()" ><br><br><br>
<p id="my-error-message-container" 
style="display:none; border:1px solid red; color:red; background-color:white; font-size:12px; padding:0px; width:188px;"></p>
    <input type="submit" id="submit" value="Next" onclick="storeuser()"/> 
   
</center>
</div>
<script>
var url =  window.location.href;
console.log("url"+window.location.href);
const urlParams = new URLSearchParams(window.location.search);
const documentid = urlParams.get('Reservation');
const Additionalguest = urlParams.get('Additionalguest');
console.log("Additionalguest true or false"+Additionalguest);
console.log(" documentid for additional guest"+documentid); 
console.log("parsedUrl"+url);

          window.localStorage.setItem('documentid', documentid);
/*function store_additionaluser_uid(documentid){
    console.log("inside store_additionaluser_uid ");
     var Additional_guest_uid = firebase.auth().currentUser.uid;
                console.log("Additional_guest_uid"+Additional_guest_uid);
        const db = firebase.firestore();
     db.collection("ReservationSubmission").where("Basic_Reservation_ID", "==", document_id)
    .get()
    .then(function(querySnapshot) {
              //console.log(querySnapshot);
        querySnapshot.forEach(function(doc) {
             console.log("ReservationSubmission document id"+doc.id);
        db.collection("Reservation").doc(document_id)
         .set(
            {
                Additional_guest_uid : Additional_guest_uid,
            },
            { merge: true }
            );
  
        })
        
    })
    
}*/
function RemoveErrorMessageFromPage()
{
   var IDofContainer = "my-error-message-container";
   document.getElementById(IDofContainer).innerHTML = "";
   document.getElementById(IDofContainer).style.display = "none";
}

function InsertErrorMessageIntoPage(content)
{
   var IDofContainer = "my-error-message-container";
   document.getElementById(IDofContainer).style.display = "";
   document.getElementById(IDofContainer).innerHTML = content;
}

function Validatephone() {
      RemoveErrorMessageFromPage();
  var phoneno = /^\d{10}$/;
  var phone = document.getElementById("phone").value;
  var firstname = document.getElementById("firstname").value;
  var lastname = document.getElementById("lastname").value;
  if (phone === "" || lastname =="" || firstname=="") {
    //alert("Phone Number must be filled out");
    InsertErrorMessageIntoPage("One or more fields are incomplete!.");
    return false;
  }
  else if(phone.match(phoneno))
{
//storeuser();
return true;
}
  else{
     // alert("You have entered an invalid PhoneNumber!");
           InsertErrorMessageIntoPage("Please Enter a Valid Phone Number!");

return false;
}
    
}
//window.onload = store_additionaluser_uid;
</script>
  </body>

</html>
 